<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <script type="text/javascript" src="../lib/require.js"></script>
    <script type="text/javascript" src="./js/config.js"></script>
    <style>
        body{
            background: -webkit-radial-gradient(center, circle cover, #555a5f 0%, #1c1e20 100%);
        }
    </style>
</head>
<body>
    <canvas id="main"></canvas>
    <canvas id="main-2"></canvas>
    <script type="text/javascript">
        require(['qtek/qtek',
                'qtek-2d',
                'text!../tests/assets/tiger.svg'], function(qtek, qtek2d, svgData){
            var svgLoader = new qtek2d.loader.SVG();
            var node = svgLoader.parse(svgData);

            var canvas = document.getElementById('main');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;


            var canvas2 = document.getElementById('main-2');
            canvas2.width = window.innerWidth;
            canvas2.height = window.innerHeight;

            var ctx = new qtek2d.context.Context2D({
                canvas : canvas,
                depthChannelGap : 0.2
            });
            // canvas.style.width = '600px';
            // canvas.style.height = Math.round(canvas.height / canvas.width * 600) + 'px';
            // canvas2.style.width = '600px';

            var ctx2 = canvas2.getContext('2d');
            node.render(ctx2);
            
            var start = performance.now();
            var painter = ctx.beginDraw();
            // ctx.scale(2, -2);
            // ctx.translate(0, 200);
            // console.profile('draw');
            node.render(ctx);
            ctx.endDraw();
            // console.profileEnd('draw');
            console.log(performance.now() - start);

            var start = performance.now();
            // ctx2.translate(200, 200);
            ctx2.scale(1, -1);
            node.render(ctx2);
            console.log(performance.now() - start);

            // ctx.camera = new qtek.camera.Perspective({
            //     aspect : canvas.width / canvas.height
            // });
            // ctx.camera.far = 2000;
            // ctx.camera.position.z =800;

            // var control = new qtek.plugin.OrbitControl({
            //     domElement : canvas,
            //     target : ctx.camera
            // });
            // control.up.y = -1;

            // var animation = new qtek.animation.Animation();
            // animation.start();
            // animation.on('frame', function(dTime) {
            //     control.update(dTime * 100);
            //     ctx.camera.update(true);
            //     ctx.clear();
            //     painter.draw(ctx);
            // });
        });
    </script>
</body>
</html>